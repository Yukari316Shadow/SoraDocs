import{_ as n,z as s,A as a,a6 as e}from"./framework-cb9358d9.js";const t={},p=e(`<div class="custom-container tip"><p class="custom-container-title">提示</p><p>实例对应框架版本和当前文档版本一致</p><p>并且会随文档更新同步更新</p></div><blockquote><p>这些实例代码整理自自用bot和更新日志</p><p>且不分先后</p></blockquote><h2 id="常用bot模板-反向ws" tabindex="-1"><a class="header-anchor" href="#常用bot模板-反向ws" aria-hidden="true">#</a> 常用bot模板（反向ws）</h2><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Sora</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Sora<span class="token punctuation">.</span>Interfaces</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Sora<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Config</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Sora<span class="token punctuation">.</span>Util</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">YukariToolBox<span class="token punctuation">.</span>LightLog</span><span class="token punctuation">;</span>

<span class="token comment">//设置log等级</span>
Log<span class="token punctuation">.</span>LogConfiguration
   <span class="token punctuation">.</span><span class="token function">EnableConsoleOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">SetLogLevel</span><span class="token punctuation">(</span>LogLevel<span class="token punctuation">.</span>Info<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//实例化Sora服务</span>
<span class="token class-name">ISoraService</span> service <span class="token operator">=</span> SoraServiceFactory<span class="token punctuation">.</span><span class="token function">CreateService</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServerConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//启动服务并捕捉错误</span>
<span class="token keyword">await</span> service<span class="token punctuation">.</span><span class="token function">StartService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">RunCatch</span><span class="token punctuation">(</span>e <span class="token operator">=&gt;</span> Log<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Sora Service&quot;</span><span class="token punctuation">,</span> Log<span class="token punctuation">.</span><span class="token function">ErrorLogBuilder</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="启用console的日志输出" tabindex="-1"><a class="header-anchor" href="#启用console的日志输出" aria-hidden="true">#</a> 启用Console的日志输出</h2><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">//设置log等级</span>
Log<span class="token punctuation">.</span>LogConfiguration
   <span class="token punctuation">.</span><span class="token function">EnableConsoleOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">SetLogLevel</span><span class="token punctuation">(</span>LogLevel<span class="token punctuation">.</span>Info<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="构建消息" tabindex="-1"><a class="header-anchor" href="#构建消息" aria-hidden="true">#</a> 构建消息</h2><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">MessageBody</span> message1 <span class="token operator">=</span> <span class="token string">&quot;好耶&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">MessageBody</span> message2 <span class="token operator">=</span> <span class="token string">&quot;坏耶&quot;</span> <span class="token operator">+</span> <span class="token number">100000</span><span class="token punctuation">.</span><span class="token function">At</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> SoraSegment<span class="token punctuation">.</span><span class="token function">Face</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="原cq与sora消息段互转" tabindex="-1"><a class="header-anchor" href="#原cq与sora消息段互转" aria-hidden="true">#</a> 原CQ与Sora消息段互转</h2><h3 id="cq码消息反序列化" tabindex="-1"><a class="header-anchor" href="#cq码消息反序列化" aria-hidden="true">#</a> CQ码消息反序列化</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">MessageBody</span> m <span class="token operator">=</span> CQCodeUtil<span class="token punctuation">.</span><span class="token function">DeserializeMessage</span><span class="token punctuation">(</span><span class="token string">@&quot;[CQ:at,qq=123456]好耶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SoraSegment</span> s <span class="token operator">=</span> CQCodeUtil<span class="token punctuation">.</span><span class="token function">DeserializeCqCode</span><span class="token punctuation">(</span><span class="token string">@&quot;[CQ:at,qq=123456]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cq码消息序列化" tabindex="-1"><a class="header-anchor" href="#cq码消息序列化" aria-hidden="true">#</a> CQ码消息序列化</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">MessageBody</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MessageBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span>      m   <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">SerializeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span>      cq  <span class="token operator">=</span> SoraSegment<span class="token punctuation">.</span><span class="token function">At</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SerializeSegment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="注册指令-群" tabindex="-1"><a class="header-anchor" href="#注册指令-群" aria-hidden="true">#</a> 注册指令(群)</h2><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SoraCommand</span><span class="token attribute-arguments"><span class="token punctuation">(</span>
    CommandExpressions <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Description <span class="token operator">=</span> <span class="token string">&quot;死了啦都你害的啦&quot;</span><span class="token punctuation">,</span>
    SourceType <span class="token operator">=</span> SourceFlag<span class="token punctuation">.</span>Group<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token return-type class-name">ValueTask</span> <span class="token function">TestCommand1</span><span class="token punctuation">(</span><span class="token class-name">GroupMessageEventArgs</span> eventArgs<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    eventArgs<span class="token punctuation">.</span>IsContinueEventChain <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> eventArgs<span class="token punctuation">.</span><span class="token function">Reply</span><span class="token punctuation">(</span>SoraSegment<span class="token punctuation">.</span><span class="token function">Record</span><span class="token punctuation">(</span><span class="token string">@&quot;好耶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="动态向管理器注册指令-群" tabindex="-1"><a class="header-anchor" href="#动态向管理器注册指令-群" aria-hidden="true">#</a> 动态向管理器注册指令(群)</h2><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">ISoraService</span> service <span class="token operator">=</span> SoraServiceFactory<span class="token punctuation">.</span><span class="token function">CreateService</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServerConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
service<span class="token punctuation">.</span>Event<span class="token punctuation">.</span>CommandManager<span class="token punctuation">.</span><span class="token function">RegisterGroupDynamicCommand</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> eventArgs <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        eventArgs<span class="token punctuation">.</span>IsContinueEventChain <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> eventArgs<span class="token punctuation">.</span><span class="token function">Reply</span><span class="token punctuation">(</span><span class="token string">&quot;shit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),o=[p];function c(i,l){return s(),a("div",null,o)}const r=n(t,[["render",c],["__file","index.html.vue"]]);export{r as default};
